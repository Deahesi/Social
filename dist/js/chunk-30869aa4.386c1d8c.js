(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30869aa4"],{"3ca3":function(e,t,r){"use strict";var n=r("6547").charAt,a=r("69f3"),i=r("7dd0"),s="String Iterator",o=a.set,c=a.getterFor(s);i(String,"String",(function(e){o(this,{type:s,string:String(e),index:0})}),(function(){var e,t=c(this),r=t.string,a=t.index;return a>=r.length?{value:void 0,done:!0}:(e=n(r,a),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,r){"use strict";var n=r("0366"),a=r("7b0b"),i=r("9bdd"),s=r("e95a"),o=r("50c4"),c=r("8418"),u=r("35a1");e.exports=function(e){var t,r,d,l,f,v,p=a(e),m="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,g=void 0!==h,y=u(p),x=0;if(g&&(h=n(h,b>2?arguments[2]:void 0,2)),void 0==y||m==Array&&s(y))for(t=o(p.length),r=new m(t);t>x;x++)v=g?h(p[x],x):p[x],c(r,x,v);else for(l=y.call(p),f=l.next,r=new m;!(d=f.call(l)).done;x++)v=g?i(l,h,[d.value,x],!0):d.value,c(r,x,v);return r.length=x,r}},"6c40":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex friends-wrap m-auto justify-content-between"},[r("div",{staticClass:"friends-search"},[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("b-form-input",{model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),e.loading?r("Loader",{attrs:{size:1}}):r("b-button",{attrs:{type:"submit"}},[e._v("Поиск")])],1),r("div",{staticClass:"results"},e._l(e.searchFriends,(function(t){return r("FriendSearch",{key:t.id,attrs:{firstName:t.firstName,surName:t.surName,id:t.id},on:{added:e.updateGetters}})})),1)],1),r("div",{staticClass:"friends-list"},[r("h2",[e._v("Ваши друзья:")]),e._l(e.friends,(function(e){return r("Friend",{key:e.id,attrs:{id:e.id,dialogId:e.dialogId}})})),e._l(e.requests,(function(e){return r("FriendRequest",{key:e,attrs:{id:e}})}))],2)])},a=[],i=(r("b0c0"),r("96cf"),r("1da1")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"friend-card"},[r("div",{staticClass:"d-flex align-items-center"},[r("b-avatar",{attrs:{src:e.avatar,size:"4rem",to:"/profile/"+e.id}}),r("b-card-title",{staticClass:"ml-3"},[e._v(" "+e._s(e.firstName)+" "+e._s(e.surName)+" ")])],1),e.loading?r("Loader"):e.friend?e._e():r("b-button",{ref:"btnAdd",staticClass:"friend-card__button",attrs:{variant:"primary",disabled:e.added},on:{click:function(t){return t.preventDefault(),e.addFriend(t)}}},[e._v("Добавить в друзья ")])],1)},o=[],c=r("b85c"),u={name:"FriendSearch",props:["firstName","surName","id"],data:function(){return{avatar:"",loading:!1,friend:!1,added:!1}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getAvatar",e.id);case 2:e.avatar=t.sent,r=e.$store.getters.friends,n=Object(c["a"])(r),t.prev=5,n.s();case 7:if((a=n.n()).done){t.next=14;break}if(i=a.value,e.id!==i){t.next=12;break}return e.friend=!0,t.abrupt("break",14);case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](5),n.e(t.t0);case 19:return t.prev=19,n.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[5,16,19,22]])})))()},methods:{addFriend:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("addFriend",e.id);case 4:r=e.$store.getters.friends,n=Object(c["a"])(r),t.prev=6,n.s();case 8:if((a=n.n()).done){t.next=15;break}if(i=a.value,e.id!==i){t.next=13;break}return e.friend=!0,t.abrupt("break",15);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](6),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:e.added=!0,e.$emit("added"),t.next=31;break;case 27:t.prev=27,t.t1=t["catch"](1),console.log(t.t1),e.added=!1;case 31:e.loading=!1;case 32:case"end":return t.stop()}}),t,null,[[1,27],[6,17,20,23]])})))()}}},d=u,l=r("2877"),f=Object(l["a"])(d,s,o,!1,null,"0eeeec3a",null),v=f.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"friend-own__card"},[r("div",{staticClass:"d-flex align-items-center"},[r("b-avatar",{attrs:{src:e.avatar,size:"3rem",to:"/profile/"+e.id}}),r("b-card-title",{staticClass:"ml-3",staticStyle:{"font-size":"20px"}},[e._v(" "+e._s(e.name)+" ")])],1),e.active?r("b-icon",{attrs:{icon:"inbox-fill",scale:"1.5em",animation:"cylon-vertical",id:e.id},on:{mouseleave:function(t){e.active=!1},click:function(t){return t.preventDefault(),e.$router.push("/messages/"+e.dialogId)}}}):r("b-icon",{attrs:{icon:"inbox-fill",scale:"1.5em",id:e.id},on:{mouseenter:function(t){e.active=!0},click:function(t){return t.preventDefault(),e.$router.push("/messages/"+e.dialogId)}}}),r("b-tooltip",{attrs:{target:e.id,triggers:"hover"}},[e._v(" Отправить сообщение ")])],1)},m=[],b={name:"Friend",props:["id","dialogId"],data:function(){return{avatar:"",active:!1,name:""}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getAvatar",e.id);case 2:return e.avatar=t.sent,t.next=5,e.$store.dispatch("getInfo",e.id);case 5:e.name=t.sent.name;case 6:case"end":return t.stop()}}),t)})))()}},h=b,g=Object(l["a"])(h,p,m,!1,null,"869245bc",null),y=g.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"friend-own__card"},[r("div",{staticClass:"d-flex align-items-center"},[r("b-avatar",{attrs:{src:e.avatar,size:"3rem",to:"/profile/"+e.id}}),r("b-card-title",{staticClass:"ml-3",staticStyle:{"font-size":"20px"}},[e._v(" "+e._s(e.name)+" ")])],1),e.active?r("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"people-fill",scale:"1.5em",id:e.id},on:{mouseleave:function(t){e.active=!1},click:function(t){return t.preventDefault(),e.submitRequest(t)}}}):r("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"people",scale:"1.5em",id:e.id},on:{mouseenter:function(t){e.active=!0}}}),r("b-tooltip",{attrs:{target:e.id,triggers:"hover"}},[e._v(" Принять заявку ")])],1)},w=[],k={name:"FriendRequest",props:["id"],data:function(){return{avatar:"",active:!1,name:""}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getAvatar",e.id);case 2:return e.avatar=t.sent,t.next=5,e.$store.dispatch("getInfo",e.id);case 5:e.name=t.sent.name;case 6:case"end":return t.stop()}}),t)})))()},methods:{submitRequest:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("submitRequest",e.id);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()}}},S=k,_=Object(l["a"])(S,x,w,!1,null,null,null),$=_.exports,R=r("8aa5"),A=r.n(R),F={name:"Friends",components:{Friend:y,FriendSearch:v,FriendRequest:$},data:function(){return{loading:!1,name:"",searchFriends:[],friends:[],requests:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("getUid");case 3:r=t.sent,e.friends=e.$store.getters.friends,e.requests=e.$store.getters.requests,A.a.firestore().collection("users").doc(r).onSnapshot((function(t){e.$store.commit("setFriends",t.data().friends||[]),e.$store.commit("setRequests",t.data().friendRequest||[]),e.friends=e.$store.getters.friends,e.requests=e.$store.getters.requests})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},methods:{onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("searchFriends",e.name);case 4:e.searchFriends=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},updateGetters:function(){this.friends=this.$store.getters.friends}}},j=F,C=Object(l["a"])(j,n,a,!1,null,"74e9b402",null);t["default"]=C.exports},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),s=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:s},{from:a})},b85c:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("a630"),r("fb6a"),r("b0c0"),r("25f0");function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function i(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(c)throw s}}}}},d28b:function(e,t,r){var n=r("746f");n("iterator")},e01a:function(e,t,r){"use strict";var n=r("23e7"),a=r("83ab"),i=r("da84"),s=r("5135"),o=r("861d"),c=r("9bf2").f,u=r("e893"),d=i.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var l={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new d(e):void 0===e?d():d(e);return""===e&&(l[t]=!0),t};u(f,d);var v=f.prototype=d.prototype;v.constructor=f;var p=v.toString,m="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=p.call(e);if(s(l,e))return"";var r=m?t.slice(7,-1):t.replace(b,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),s=r("23cb"),o=r("50c4"),c=r("fc6a"),u=r("8418"),d=r("b622"),l=r("1dde"),f=r("ae40"),v=l("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=d("species"),b=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!v||!p},{slice:function(e,t){var r,n,d,l=c(this),f=o(l.length),v=s(e,f),p=s(void 0===t?f:t,f);if(i(l)&&(r=l.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[m],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return b.call(l,v,p);for(n=new(void 0===r?Array:r)(h(p-v,0)),d=0;v<p;v++,d++)v in l&&u(n,d,l[v]);return n.length=d,n}})}}]);
//# sourceMappingURL=chunk-30869aa4.386c1d8c.js.map