(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37d3f990"],{2553:function(t,e,r){var s=r("c8d4");"undefined"!=typeof s&&(s.MD5=function(t){function e(t,e){return t<<e|t>>>32-e}function r(t,e){var r,s,n,a,i;return n=2147483648&t,a=2147483648&e,r=1073741824&t,s=1073741824&e,i=(1073741823&t)+(1073741823&e),r&s?2147483648^i^n^a:r|s?1073741824&i?3221225472^i^n^a:1073741824^i^n^a:i^n^a}function s(t,e,r){return t&e|~t&r}function n(t,e,r){return t&r|e&~r}function a(t,e,r){return t^e^r}function i(t,e,r){return e^(t|~r)}function o(t,n,a,i,o,c,d){return t=r(t,r(r(s(n,a,i),o),d)),r(e(t,c),n)}function c(t,s,a,i,o,c,d){return t=r(t,r(r(n(s,a,i),o),d)),r(e(t,c),s)}function d(t,s,n,i,o,c,d){return t=r(t,r(r(a(s,n,i),o),d)),r(e(t,c),s)}function u(t,s,n,a,o,c,d){return t=r(t,r(r(i(s,n,a),o),d)),r(e(t,c),s)}function f(t){var e,r=t.length,s=r+8,n=(s-s%64)/64,a=16*(n+1),i=Array(a-1),o=0,c=0;while(c<r)e=(c-c%4)/4,o=c%4*8,i[e]=i[e]|t.charCodeAt(c)<<o,c++;return e=(c-c%4)/4,o=c%4*8,i[e]=i[e]|128<<o,i[a-2]=r<<3,i[a-1]=r>>>29,i}function h(t){var e,r,s="",n="";for(r=0;r<=3;r++)e=t>>>8*r&255,n="0"+e.toString(16),s+=n.substr(n.length-2,2);return s}var l,p,g,y,m,v,b,S,C,I=Array(),A=7,x=12,w=17,E=22,B=5,k=9,O=14,U=20,_=4,P=11,D=16,R=23,T=6,M=10,F=15,z=21;for(I=f(t),v=1732584193,b=4023233417,S=2562383102,C=271733878,l=0;l<I.length;l+=16)p=v,g=b,y=S,m=C,v=o(v,b,S,C,I[l+0],A,3614090360),C=o(C,v,b,S,I[l+1],x,3905402710),S=o(S,C,v,b,I[l+2],w,606105819),b=o(b,S,C,v,I[l+3],E,3250441966),v=o(v,b,S,C,I[l+4],A,4118548399),C=o(C,v,b,S,I[l+5],x,1200080426),S=o(S,C,v,b,I[l+6],w,2821735955),b=o(b,S,C,v,I[l+7],E,4249261313),v=o(v,b,S,C,I[l+8],A,1770035416),C=o(C,v,b,S,I[l+9],x,2336552879),S=o(S,C,v,b,I[l+10],w,4294925233),b=o(b,S,C,v,I[l+11],E,2304563134),v=o(v,b,S,C,I[l+12],A,1804603682),C=o(C,v,b,S,I[l+13],x,4254626195),S=o(S,C,v,b,I[l+14],w,2792965006),b=o(b,S,C,v,I[l+15],E,1236535329),v=c(v,b,S,C,I[l+1],B,4129170786),C=c(C,v,b,S,I[l+6],k,3225465664),S=c(S,C,v,b,I[l+11],O,643717713),b=c(b,S,C,v,I[l+0],U,3921069994),v=c(v,b,S,C,I[l+5],B,3593408605),C=c(C,v,b,S,I[l+10],k,38016083),S=c(S,C,v,b,I[l+15],O,3634488961),b=c(b,S,C,v,I[l+4],U,3889429448),v=c(v,b,S,C,I[l+9],B,568446438),C=c(C,v,b,S,I[l+14],k,3275163606),S=c(S,C,v,b,I[l+3],O,4107603335),b=c(b,S,C,v,I[l+8],U,1163531501),v=c(v,b,S,C,I[l+13],B,2850285829),C=c(C,v,b,S,I[l+2],k,4243563512),S=c(S,C,v,b,I[l+7],O,1735328473),b=c(b,S,C,v,I[l+12],U,2368359562),v=d(v,b,S,C,I[l+5],_,4294588738),C=d(C,v,b,S,I[l+8],P,2272392833),S=d(S,C,v,b,I[l+11],D,1839030562),b=d(b,S,C,v,I[l+14],R,4259657740),v=d(v,b,S,C,I[l+1],_,2763975236),C=d(C,v,b,S,I[l+4],P,1272893353),S=d(S,C,v,b,I[l+7],D,4139469664),b=d(b,S,C,v,I[l+10],R,3200236656),v=d(v,b,S,C,I[l+13],_,681279174),C=d(C,v,b,S,I[l+0],P,3936430074),S=d(S,C,v,b,I[l+3],D,3572445317),b=d(b,S,C,v,I[l+6],R,76029189),v=d(v,b,S,C,I[l+9],_,3654602809),C=d(C,v,b,S,I[l+12],P,3873151461),S=d(S,C,v,b,I[l+15],D,530742520),b=d(b,S,C,v,I[l+2],R,3299628645),v=u(v,b,S,C,I[l+0],T,4096336452),C=u(C,v,b,S,I[l+7],M,1126891415),S=u(S,C,v,b,I[l+14],F,2878612391),b=u(b,S,C,v,I[l+5],z,4237533241),v=u(v,b,S,C,I[l+12],T,1700485571),C=u(C,v,b,S,I[l+3],M,2399980690),S=u(S,C,v,b,I[l+10],F,4293915773),b=u(b,S,C,v,I[l+1],z,2240044497),v=u(v,b,S,C,I[l+8],T,1873313359),C=u(C,v,b,S,I[l+15],M,4264355552),S=u(S,C,v,b,I[l+6],F,2734768916),b=u(b,S,C,v,I[l+13],z,1309151649),v=u(v,b,S,C,I[l+4],T,4149444226),C=u(C,v,b,S,I[l+11],M,3174756917),S=u(S,C,v,b,I[l+2],F,718787259),b=u(b,S,C,v,I[l+9],z,3951481745),v=r(v,p),b=r(b,g),S=r(S,y),C=r(C,m);var K=h(v)+h(b)+h(S)+h(C);return K.toLowerCase()})},4314:function(t,e){pidCryptUtil={},pidCryptUtil.encodeBase64=function(t,e){t||(t="");var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e="undefined"!=typeof e&&e;var s,n,a,i,o,c,d,u,f,h,l,p=[],g="";if(h=e?pidCryptUtil.encodeUTF8(t):t,f=h.length%3,f>0)while(f++<3)g+="=",h+="\0";for(f=0;f<h.length;f+=3)s=h.charCodeAt(f),n=h.charCodeAt(f+1),a=h.charCodeAt(f+2),i=s<<16|n<<8|a,o=i>>18&63,c=i>>12&63,d=i>>6&63,u=63&i,p[f/3]=r.charAt(o)+r.charAt(c)+r.charAt(d)+r.charAt(u);return l=p.join(""),l=l.slice(0,l.length-g.length)+g,l},pidCryptUtil.decodeBase64=function(t,e){t||(t="");var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e="undefined"!=typeof e&&e;var s,n,a,i,o,c,d,u,f,h,l=[];h=e?pidCryptUtil.decodeUTF8(t):t;for(var p=0;p<h.length;p+=4)i=r.indexOf(h.charAt(p)),o=r.indexOf(h.charAt(p+1)),c=r.indexOf(h.charAt(p+2)),d=r.indexOf(h.charAt(p+3)),u=i<<18|o<<12|c<<6|d,s=u>>>16&255,n=u>>>8&255,a=255&u,l[p/4]=String.fromCharCode(s,n,a),64==d&&(l[p/4]=String.fromCharCode(s,n)),64==c&&(l[p/4]=String.fromCharCode(s));return f=l.join(""),f=e?pidCryptUtil.decodeUTF8(f):f,f},pidCryptUtil.encodeUTF8=function(t){return t||(t=""),t=t.replace(/[\u0080-\u07ff]/g,(function(t){var e=t.charCodeAt(0);return String.fromCharCode(192|e>>6,128|63&e)})),t=t.replace(/[\u0800-\uffff]/g,(function(t){var e=t.charCodeAt(0);return String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})),t},pidCryptUtil.decodeUTF8=function(t){return t||(t=""),t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,(function(t){var e=(31&t.charCodeAt(0))<<6|63&t.charCodeAt(1);return String.fromCharCode(e)})),t=t.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,(function(t){var e=(15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2);return String.fromCharCode(e)})),t},pidCryptUtil.convertToHex=function(t){t||(t="");for(var e="",r="",s=0;s<t.length;s++)r=t.charCodeAt(s).toString(16),e+=1==r.length?"0"+r:r;return e},pidCryptUtil.convertFromHex=function(t){t||(t="");for(var e="",r=0;r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substring(r,r+2),16));return e},pidCryptUtil.stripLineFeeds=function(t){t||(t="");var e="";return e=t.replace(/\n/g,""),e=e.replace(/\r/g,""),e},pidCryptUtil.toByteArray=function(t){t||(t="");for(var e=[],r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e},pidCryptUtil.fragment=function(t,e,r){if(t||(t=""),!e||e>=t.length)return t;r||(r="\n");for(var s="",n=0;n<t.length;n+=e)s+=t.substr(n,e)+r;return s},pidCryptUtil.formatHex=function(t,e){t||(t=""),e||(e=45);for(var r="",s=t.toLowerCase(),n=0;n<s.length;n+=2)r+=s.substr(n,2)+":";return s=this.fragment(r,e),s},pidCryptUtil.byteArray2String=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t.exports=pidCryptUtil},"95f0":function(t,e,r){t.exports=r("c8d4")},a20a:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("Loader",{attrs:{size:7}}):r("div",{staticClass:"d-flex flex-column align-items-center"},[r("b-list-group-item",{staticClass:"name-item"},[r("b-avatar",{staticClass:"mr-3",attrs:{src:t.infoUsers[t.friendId].avatar,to:"/profile/"+t.friendId}}),r("h3",{staticClass:"mr-auto"},[t._v(t._s(t.user.name))])],1),r("div",{staticClass:"d-flex flex-column align-items-center messages-wrap"},[r("b-card",{staticClass:"messages-frame flex-column d-flex",attrs:{id:"scrollDown"}},t._l(t.dialogInfo.messages,(function(e){return r("b-list-group-item",{key:e.crypted,staticClass:"d-flex align-items-center message",attrs:{id:e.id||""}},[r("b-avatar",{staticClass:"mr-3",attrs:{src:t.infoUsers[e.whoSend].avatar,to:"/profile/"+e.whoSend}}),r("span",{staticClass:"mr-auto"},[t._v(t._s(e.message))])],1)})),1),r("form",{staticClass:"w-100",on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[r("b-input-group",{staticClass:"mt-3"},[r("b-form-input",{model:{value:t.message,callback:function(e){t.message="string"===typeof e?e.trim():e},expression:"message"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Отправить")])],1)],1)],1)],1)],1)},n=[],a=(r("d81d"),r("b0c0"),r("96cf"),r("1da1")),i=r("95f0"),o=r.n(i),c=(r("cf25"),r("4314"),r("8aa5")),d=r.n(c),u={name:"Dialog",data:function(){return{message:"",id:"",user:"",dialogInfo:{},uid:"",friendId:"",avatar:"",infoUsers:{},loading:!0}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=new o.a.AES.CBC,t.id=t.$route.params.id,e.next=5,t.$store.dispatch("getDialogInfo",t.id);case 5:return t.dialogInfo=e.sent,t.$store.commit("setMessages",{messages:t.dialogInfo.messages?t.dialogInfo.messages:[],id:t.id}),t.dialogInfo={messages:t.dialogInfo.messages?t.dialogInfo.messages.map((function(e,s){return{message:r.decryptText(t.dialogInfo.messages[s].message,Object({NODE_ENV:"production",BASE_URL:"/"}).KEY_OF_MESSAGE,{nBits:256}),whoSend:t.dialogInfo.messages[s].whoSend,crypted:t.dialogInfo.messages[s].message}})):[],user1Id:t.dialogInfo.user1Id,user2Id:t.dialogInfo.user2Id},t.dialogInfo.messages.length>0&&(t.dialogInfo.messages[t.dialogInfo.messages.length-1].id="lastMessage"),e.next=11,t.$store.dispatch("getUid");case 11:if(t.uid=e.sent,t.friendId=t.dialogInfo.user1Id===t.uid?t.dialogInfo.user2Id:t.dialogInfo.user1Id,t.infoUsers[t.dialogInfo.user1Id]={},t.infoUsers[t.dialogInfo.user2Id]={},t.dialogInfo.user1Id!==t.uid){e.next=21;break}return e.next=18,t.$store.dispatch("getInfo",t.dialogInfo.user2Id);case 18:e.t0=e.sent,e.next=24;break;case 21:return e.next=23,t.$store.dispatch("getInfo",t.dialogInfo.user1Id);case 23:e.t0=e.sent;case 24:return t.user=e.t0,e.next=27,t.$store.dispatch("getAvatar",t.dialogInfo.user1Id);case 27:return t.infoUsers[t.dialogInfo.user1Id].avatar=e.sent,e.next=30,t.$store.dispatch("getAvatar",t.dialogInfo.user2Id);case 30:t.infoUsers[t.dialogInfo.user2Id].avatar=e.sent,d.a.database().ref("dialogs/".concat(t.id)).on("value",(function(e){t.dialogInfo=e.val(),t.$store.commit("setMessages",{messages:t.dialogInfo.messages?t.dialogInfo.messages:[],id:t.id}),t.dialogInfo={messages:t.dialogInfo.messages?t.dialogInfo.messages.map((function(e,s){return{message:r.decryptText(t.dialogInfo.messages[s].message,Object({NODE_ENV:"production",BASE_URL:"/"}).KEY_OF_MESSAGE,{nBits:256}),whoSend:t.dialogInfo.messages[s].whoSend,crypted:t.dialogInfo.messages[s].message}})):[],user1Id:t.dialogInfo.user1Id,user2Id:t.dialogInfo.user2Id},t.dialogInfo.messages.length>0&&(t.dialogInfo.messages[t.dialogInfo.messages.length-1].id="lastMessage"),t.$scrollTo("#lastMessage",1,{container:".card-body",duration:500,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0})})),e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](0),console.log(e.t1);case 37:t.loading=!1,t.$nextTick((function(){t.$scrollTo("#lastMessage",1,{container:".card-body",duration:500,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0})}));case 39:case"end":return e.stop()}}),e,null,[[0,34]])})))()},computed:{name:function(t){return this.infoUsers[t].name}},methods:{sendMessage:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=new o.a.AES.CBC,e.next=4,t.$store.dispatch("getUid");case 4:return s=e.sent,n=r.encryptText(t.message,Object({NODE_ENV:"production",BASE_URL:"/"}).KEY_OF_MESSAGES,{nBits:256}),t.$store.commit("addMessage",{message:n,id:t.id,whoSend:s}),t.message="",t.dialogInfo.messages=t.$store.getters.messages[t.id].messages,t.dialogInfo={messages:t.dialogInfo.messages?t.dialogInfo.messages.map((function(e,s){return{message:r.decryptText(t.dialogInfo.messages[s].message,Object({NODE_ENV:"production",BASE_URL:"/"}).KEY_OF_MESSAGE,{nBits:256}),whoSend:t.dialogInfo.messages[s].whoSend,crypted:t.dialogInfo.messages[s].message}})):[],user1Id:t.dialogInfo.user1Id,user2Id:t.dialogInfo.user2Id},e.next=12,t.$store.dispatch("addMessage",t.id);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()}}},f=u,h=r("2877"),l=Object(h["a"])(f,s,n,!1,null,"aebaad5c",null);e["default"]=l.exports},c0c4:function(t,e,r){
/*!Copyright (c) 2009 pidder <www.pidder.com>*/
var s=r("c8d4");"undefined"!=typeof s&&(s.AES=function(t){this.env=t||new s,this.blockSize=16,this.ShiftRowTabInv,this.xtime,this.SBox=new Array(99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22),this.SBoxInv=new Array(82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125),this.ShiftRowTab=new Array(0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11)},s.AES.prototype.init=function(){this.env.setParams({blockSize:this.blockSize}),this.ShiftRowTabInv=new Array(16);for(var t=0;t<16;t++)this.ShiftRowTabInv[this.ShiftRowTab[t]]=t;for(this.xtime=new Array(256),t=0;t<128;t++)this.xtime[t]=t<<1,this.xtime[128+t]=t<<1^27},s.AES.prototype.expandKey=function(t){var e,r=t.slice(),s=r.length,n=1;switch(s){case 16:e=176;break;case 24:e=208;break;case 32:e=240;break;default:alert("AESCore.expandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var a=s;a<e;a+=4){var i=r.slice(a-4,a);a%s==0?(i=new Array(this.SBox[i[1]]^n,this.SBox[i[2]],this.SBox[i[3]],this.SBox[i[0]]),(n<<=1)>=256&&(n^=283)):s>24&&a%s==16&&(i=new Array(this.SBox[i[0]],this.SBox[i[1]],this.SBox[i[2]],this.SBox[i[3]]));for(var o=0;o<4;o++)r[a+o]=r[a+o-s]^i[o]}return r},s.AES.prototype.encrypt=function(t,e){var r=e.length,s=t.slice();this.addRoundKey(s,e.slice(0,16));for(var n=16;n<r-16;n+=16)this.subBytes(s),this.shiftRows(s),this.mixColumns(s),this.addRoundKey(s,e.slice(n,n+16));return this.subBytes(s),this.shiftRows(s),this.addRoundKey(s,e.slice(n,r)),s},s.AES.prototype.decrypt=function(t,e){var r=e.length,s=t.slice();this.addRoundKey(s,e.slice(r-16,r)),this.shiftRows(s,1),this.subBytes(s,1);for(var n=r-32;n>=16;n-=16)this.addRoundKey(s,e.slice(n,n+16)),this.mixColumns_Inv(s),this.shiftRows(s,1),this.subBytes(s,1);return this.addRoundKey(s,e.slice(0,16)),s},s.AES.prototype.subBytes=function(t,e){for(var r="undefined"==typeof e?this.SBox.slice():this.SBoxInv.slice(),s=0;s<16;s++)t[s]=r[t[s]]},s.AES.prototype.addRoundKey=function(t,e){for(var r=0;r<16;r++)t[r]^=e[r]},s.AES.prototype.shiftRows=function(t,e){for(var r="undefined"==typeof e?this.ShiftRowTab.slice():this.ShiftRowTabInv.slice(),s=(new Array).concat(t),n=0;n<16;n++)t[n]=s[r[n]]},s.AES.prototype.mixColumns=function(t){for(var e=0;e<16;e+=4){var r=t[e+0],s=t[e+1],n=t[e+2],a=t[e+3],i=r^s^n^a;t[e+0]^=i^this.xtime[r^s],t[e+1]^=i^this.xtime[s^n],t[e+2]^=i^this.xtime[n^a],t[e+3]^=i^this.xtime[a^r]}},s.AES.prototype.mixColumns_Inv=function(t){for(var e=0;e<16;e+=4){var r=t[e+0],s=t[e+1],n=t[e+2],a=t[e+3],i=r^s^n^a,o=this.xtime[i],c=this.xtime[this.xtime[o^r^n]]^i,d=this.xtime[this.xtime[o^s^a]]^i;t[e+0]^=c^this.xtime[r^s],t[e+1]^=d^this.xtime[s^n],t[e+2]^=c^this.xtime[n^a],t[e+3]^=d^this.xtime[a^r]}},s.AES.prototype.xOr_Array=function(t,e){var r,s=Array();for(r=0;r<t.length;r++)s[r]=t[r]^e[r];return s},s.AES.prototype.getCounterBlock=function(){for(var t=new Array(this.blockSize),e=(new Date).getTime(),r=Math.floor(e/1e3),s=e%1e3,n=0;n<4;n++)t[n]=r>>>8*n&255;for(n=0;n<4;n++)t[n+4]=255&s;return t.slice()})},c8d4:function(t,e,r){
/*!Copyright (c) 2009-2015 pidder, https://www.pidder.de											*/
var s=r("4314");function n(){function t(t){t||(t=8);for(var e=new Array(t),r=[],s=0;s<256;s++)r[s]=s;for(s=0;s<e.length;s++)e[s]=r[Math.floor(Math.random()*r.length)];return e}this.setDefaults=function(){this.params.nBits=256,this.params.salt=s.convertToHex(s.byteArray2String(t(8))),this.params.blockSize=16,this.params.UTF8=!0,this.params.A0_PAD=!0},this.debug=!0,this.params={},this.params.dataIn="",this.params.dataOut="",this.params.decryptIn="",this.params.decryptOut="",this.params.encryptIn="",this.params.encryptOut="",this.params.key="",this.params.iv="",this.params.clear=!0,this.setDefaults(),this.errors="",this.warnings="",this.infos="",this.debugMsg="",this.setParams=function(t){for(var e in t||(t={}),t)this.params[e]=t[e]},this.getParams=function(){return this.params},this.getParam=function(t){return this.params[t]||""},this.clearParams=function(){this.params={}},this.getNBits=function(){return this.params.nBits},this.getOutput=function(){return this.params.dataOut},this.setError=function(t){this.error=t},this.appendError=function(t){return this.errors+=t,""},this.getErrors=function(){return this.errors},this.isError=function(){return this.errors.length>0},this.appendInfo=function(t){return this.infos+=t,""},this.getInfos=function(){return this.infos},this.setDebug=function(t){this.debug=t},this.appendDebug=function(t){return this.debugMsg+=t,""},this.isDebug=function(){return this.debug},this.getAllMessages=function(t){var e={lf:"\n",clr_mes:!1,verbose:15};for(var r in t||(t=e),e)"undefined"==typeof t[r]&&(t[r]=e[r]);var s="",n="";for(var a in this.params){switch(a){case"encryptOut":n=this.params[a].toString().toByteArray(),n=n.join().fragment(64,t.lf);break;case"key":case"iv":n=this.params[a].formatHex(48);break;default:n=this.params[a].toString().fragment(64,t.lf)}s+="<p><b>"+a+"</b>:<pre>"+n+"</pre></p>"}return this.debug&&(s+="debug: "+this.debug+t.lf),this.errors.length>0&&1==(1&t.verbose)&&(s+="Errors:"+t.lf+this.errors+t.lf),this.warnings.length>0&&2==(2&t.verbose)&&(s+="Warnings:"+t.lf+this.warnings+t.lf),this.infos.length>0&&4==(4&t.verbose)&&(s+="Infos:"+t.lf+this.infos+t.lf),this.debug&&8==(8&t.verbose)&&(s+="Debug messages:"+t.lf+this.debugMsg+t.lf),t.clr_mes&&(this.errors=this.infos=this.warnings=this.debug=""),s},this.getRandomBytes=function(e){return t(e)}}t.exports=n},cf25:function(t,e,r){var s=r("c8d4"),n=r("4314");r("2553"),r("c0c4"),"undefined"!=typeof s&&"undefined"!=typeof s.AES&&"undefined"!=typeof s.MD5&&(s.AES.CBC=function(){this.pidcrypt=new s,this.aes=new s.AES(this.pidcrypt),this.getOutput=function(){return this.pidcrypt.getOutput()},this.getAllMessages=function(t){return this.pidcrypt.getAllMessages(t)},this.isError=function(){return this.pidcrypt.isError()}},s.AES.CBC.prototype.init=function(t,e){e||(e={});var r=this.pidcrypt;r.setDefaults();var s=this.pidcrypt.getParams();for(var n in e)s[n]=e[n];var a=this.createKeyAndIv({password:t,salt:s.salt,bits:s.nBits});s.key=a.key,s.iv=a.iv,s.dataOut="",r.setParams(s),this.aes.init()},s.AES.CBC.prototype.initEncrypt=function(t,e,r){this.init(e,r),this.pidcrypt.setParams({dataIn:t,encryptIn:n.toByteArray(t)})},s.AES.CBC.prototype.initDecrypt=function(t,e,r){r||(r={});var s=this.pidcrypt;s.setParams({dataIn:t}),e||s.appendError("pidCrypt.AES.CBC.initFromEncryption: Sorry, can not crypt or decrypt without password.\n");var a=n.decodeBase64(t);0!=a.indexOf("Salted__")&&s.appendError("pidCrypt.AES.CBC.initFromCrypt: Sorry, unknown encryption method.\n");var i=a.substr(8,8);r.salt=n.convertToHex(i),this.init(e,r),a=a.substr(16),s.setParams({decryptIn:n.toByteArray(a)})},s.AES.CBC.prototype.initByValues=function(t,e,r,s){var n={};this.init("",s),n.dataIn=t,n.key=e,n.iv=r,this.pidcrypt.setParams(n)},s.AES.CBC.prototype.getAllMessages=function(t){return this.pidcrypt.getAllMessages(t)},s.AES.CBC.prototype.createKeyAndIv=function(t){var e=this.pidcrypt,r={},a=1,i="3";t||(t={}),t.salt||(t.salt=e.getRandomBytes(8),t.salt=n.convertToHex(n.byteArray2String(t.salt)),e.setParams({salt:t.salt}));var o=t.password+n.convertFromHex(t.salt),c="",d="",u=[],f=0;u[f++]=o;for(var h=0;h<i;h++){0==h?d=o:(c=n.convertFromHex(d),c+=o,d=c);for(var l=0;l<a;l++)d=s.MD5(d);u[f++]=d}switch(t.bits){case 128:r.key=u[1],r.iv=u[2];break;case 192:r.key=u[1]+u[2].substr(0,16),r.iv=u[3];break;case 256:r.key=u[1]+u[2],r.iv=u[3];break;default:e.appendError("pidCrypt.AES.CBC.createKeyAndIv: Sorry, only 128, 192 and 256 bits are supported.\nBits("+typeof t.bits+") = "+t.bits)}return r},s.AES.CBC.prototype.encryptRaw=function(t){var e=this.pidcrypt,r=this.aes,s=e.getParams();t||(t=s.encryptIn),e.setParams({encryptIn:t}),s.dataIn||e.setParams({dataIn:t});var a=n.convertFromHex(s.iv),i=s.blockSize-(t.length+1)%s.blockSize;s.A0_PAD&&(t[t.length]=10);for(var o=0;o<i;o++)t[t.length]=i;for(var c=Math.floor(s.nBits/8),d=new Array(c),u=n.convertFromHex(s.key),f=0;f<c;f++)d[f]=isNaN(u.charCodeAt(f))?0:u.charCodeAt(f);for(var h=r.expandKey(d),l=Math.ceil(t.length/s.blockSize),p=new Array(l),g=[],y=n.toByteArray(a),m=0;m<l;m++)g=t.slice(m*s.blockSize,m*s.blockSize+s.blockSize),y=r.xOr_Array(y,g),y=r.encrypt(y.slice(),h),p[m]=n.byteArray2String(y);var v=p.join("");return e.setParams({dataOut:v,encryptOut:v}),!e.isDebug()&&e.clear&&e.clearParams(),v||""},s.AES.CBC.prototype.encrypt=function(t){var e=this.pidcrypt,r="",s=e.getParams();t||(t=s.dataIn),s.UTF8&&(t=n.encodeUTF8(t)),e.setParams({dataIn:t,encryptIn:n.toByteArray(t)});var a=this.encryptRaw();return r="Salted__"+n.convertFromHex(s.salt),a=r+a,a=n.encodeBase64(a),e.setParams({dataOut:a}),!e.isDebug()&&e.clear&&e.clearParams(),a||""},s.AES.CBC.prototype.encryptText=function(t,e,r){return this.initEncrypt(t,e,r),this.encrypt()},s.AES.CBC.prototype.decryptRaw=function(t){var e=this.aes,r=this.pidcrypt,s=r.getParams();if(t||(t=s.decryptIn),r.setParams({decryptIn:t}),s.dataIn||r.setParams({dataIn:t}),s.iv.length/2<s.blockSize)return r.appendError("pidCrypt.AES.CBC.decrypt: Sorry, can not decrypt without complete set of parameters.\n Length of key,iv:"+s.key.length+","+s.iv.length);var a=n.convertFromHex(s.iv);if(t.length%s.blockSize!=0)return r.appendError("pidCrypt.AES.CBC.decrypt: Sorry, the encrypted text has the wrong length for aes-cbc mode\n Length of ciphertext:"+t.length+t.length%s.blockSize);for(var i=Math.floor(s.nBits/8),o=new Array(i),c=n.convertFromHex(s.key),d=0;d<i;d++)o[d]=isNaN(c.charCodeAt(d))?0:c.charCodeAt(d);for(var u=e.expandKey(o),f=Math.ceil(t.length/s.blockSize),h=new Array(f.length),l=n.toByteArray(a),p=[],g=[],y=0;y<f;y++)p=t.slice(y*s.blockSize,y*s.blockSize+s.blockSize),g=e.decrypt(p,u),h[y]=n.byteArray2String(e.xOr_Array(l,g)),l=p.slice();var m=h.join("");r.isDebug()&&r.appendDebug("Padding after decryption:"+n.convertToHex(m)+":"+m.length+"\n");var v=m.charCodeAt(m.length-1);if(s.A0_PAD)m=m.substr(0,m.length-(v+1));else{var b=m.length-(m.length-v),S=m.charCodeAt(m.length-v);v==S&&v==b&&(m=m.substr(0,m.length-v))}return r.setParams({dataOut:m,decryptOut:m}),!r.isDebug()&&r.clear&&r.clearParams(),m||""},s.AES.CBC.prototype.decrypt=function(t){var e=this.pidcrypt,r=e.getParams();if(t&&e.setParams({dataIn:t}),!r.decryptIn){var s=n.decodeBase64(r.dataIn);0==s.indexOf("Salted__")&&(s=s.substr(16)),e.setParams({decryptIn:n.toByteArray(s)})}var a=this.decryptRaw();return r.UTF8&&(a=n.decodeUTF8(a)),e.isDebug()&&e.appendDebug("Removed Padding after decryption:"+n.convertToHex(a)+":"+a.length+"\n"),e.setParams({dataOut:a}),!e.isDebug()&&e.clear&&e.clearParams(),a||""},s.AES.CBC.prototype.decryptText=function(t,e,r){return this.initDecrypt(t,e,r),this.decrypt()})}}]);
//# sourceMappingURL=chunk-37d3f990.1e90114c.js.map